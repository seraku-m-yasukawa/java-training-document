<div>
<div class=main>

# 3日目 カンペ
## ゴール
Java言語を使用して、以下の事ができるようになる。
- 変数の作成及び使用
- 条件分岐(if)を使て、処理フローを分ける
- 振り替えし(while, for)を使って、反復処理を構築できる
- ~~break、continueを使って、反復処理を制御できる~~

## 授業プラン
- あとで目次作りますたぶん

<div style="page-break-after:always"></div>


# オブジェクト指向
VBSみたいなのを、Procedualと呼ぶ。  
※安川この辺ちゃんと聞けてないので、Procedualに関してはあとで書く、たぶん  
メリット
- コードがシンプル
デメリット
- 現実世界のことをソフトウェアの中で表現しにくい


例えば、銀行のシステムのうち、「口座を作る」機能を作るとなったとする。  
口座（アカウント）に必要なものを考えると、
- 口座を特定するために「口座番号」
- 誰の口座か把握するための「アカウントオーナーの名前」
- 残高
が必要。
```java 

```
じゃあ、別の人が口座を作るとなったら？  
この変数のセットをもうひとつ2とかつけて作る？  
```java 

```
あるいは、`account`を`satoAccount`とかにする？
```java 

```
もっと複数人が登録するとなると、全員分作成する？無理。
画面単位で考えると、例えば、別画面を作るとなりました、新画面には利子を登録する機能を作ります、となると、変数コピペして、処理を追加して……ってする？  
じゃあそれが追加で10画面必要です、とかになると？  
そうすると、大量に同じ変数ができる。そんな中、突然「名前をフルネームじゃなくて、苗字と名前にわけてください」って言われたら、全画面の変数を直さないといけない。  
当然手間だし、漏れが発生する可能性があったりで大変なので、やってません。  

じゃあ、もっと現実世界に即した書き方で表現しよう。じゃあ、口座っていう変数を作れば便利で面白いよね。
```text
Account
  ├─name
  ├─number
  └─totalMoner
```
ってのを作ればいいよね。こんな風にAccountってのを作って使いまわせば、修正があったとしても、このAccountを直せば、一気にすべて直せます。


javaを深堀していくと、
```text 
int -> Integer
double -> Double
String
```
といった感じで、同じようなものがある。これらをもっと深堀していくと、全て`Object`というものから出来ている。  
この`Object`を使ってプログラミングするから、OOP。  
この機能を使って、自分で`Object`を作りさえすれば便利だよね。


# オブジェクトについて
以前`Array.length`というのを設定せずとも使っていたが、これは`Array`というものの、`length`というプロパティを使っている。  

先程の`Account`をクラスと呼ぶ。  
クラスを作ると言ったら、この大本となるものを作ると考えてほしい。
```java 
class HelloWorld
```
というのがクラス。で、このクラスがプログラムの名前と思ってもらえればいい。  
また、オブジェクト指向なら必ずクラスを作る必要がある。


名前に関しては、大体は最初にAppとかApplocationとかつける。  
なぜなら、mainは一番最初に実行されるから。その実行されるものを関数と呼ぶ。  
関数の名前は、その関数がどういう風に動くかを示している。  

## プロパティ
さっきの口座をプログラミングで表す。例えばAccountを作る場合。  
皆さんがAccountを口座として認識するために、
- Account
    - 名前
    - 口座番号
    - 残高

がでてきた。  
これらがそろっていれば口座と認識できるが、もし名前だけの場合、何かわからない。  
`class Account`を口座と認識するには、これら全てが必要となる。  
これらのことをプロパティと呼ぶ。  

## メソッド
じゃあ口座でできることは？
- Account
    - 引き出し
    - 振り込み
    - 預け入れ
    - 残高照会
などである。
これらの「口座でできること」を、メソッドと呼ぶ。
`class Account`は、プロパティとメソッドの全てを含んで出来ている。  



### 戻り値について
戻り値とは、メソッドを実行した結果、返ってくる値のこと。javaだと`return 〇〇;`の〇〇のところ。  
メソッドは、戻り値の型を指定してあげないといけない。下記のように書く。
```java 
public int getAmount() {
    return amount;
}
```
のように、メソッド名の後ろに戻り値の型を指定する。


また、戻り値があるメソッドとないメソッドの2種類存在する。  
戻り値がない場合、型のところに`void`と記述する。`return`は不要。
```java 
public void printHelloWorld() {
    System.out.println("HelloWorld");
}
```

例えば、今の残高が欲しい場合は戻り値があるメソッドになるし、名前を設定するようなメソッドの場合は、戻り値がないメソッドとなる。


### 引数について
引数とは、メソッドに渡してあげる値のこと。  
例えば、預け入れのメソッドを作成するとする。  
預け入れするために必要な情報は何か？預け入れる金額である。  
つまり、預け入れメソッドには、その金額を教えてあげないといけない。そんなときに引数で指定してあげる。  
引数ありのメソッドは、
```java 
public void deposit(int value) {
    amount += value;
}
```
上記のように、メソッド名の後の`()`の中に型と引数名を設定する。  
また、引数は、変数と同じように扱えるし、複数設定することもできる。複数設定するときは、カンマ区切りで表現する。


次、引き出しメソッドを作ってみてもらう。  
要件として、引き出し金額が残高よりも少ないと引き出せない。つまり、好き勝手に引き出されないようにしたい。
※適当に放置して、後で作りながら解説する。下記参考。

```java 
public void withdraw(int value) {
	if(amount >= value) {
		amount -= value;
	} else {
		System.out.println("残高不足で引き出しできません。");
	}
}
```


# 課題1
皆さんにクラスを考えてもらう。プロパティとメソッドは各2つ以上。  
- 車（定番中の定番）
- 犬（これも定番！）
- 注文
- 商品（ちょっとひねってる）
- 料理のレシピ

メソッドがこれで、プロパティがこれで……って感じのもので大丈夫。

## 実際に作ってもらったもの

<details><summary>答え</summary>

1. 車
    1. プロパティ
        1. 車名
        1. 値段
        1. サイズ
        1. 年式
        1. グレード
        1. 状態
    1. メソッド
        1. アクセル
        1. ブレーキ
        1. ハンドル操作
        1. エンジンをかける
        1. バックをする
        1. ライトを転倒
1. 犬
    1. プロパティ
        1. 名前
        1. 生年月日
        1. 性別
        1. 犬種
        1. 犬の名前
        1. 年齢
    1. メソッド
        1. 歩く
        1. 走る
        1. 吠える
        1. 排泄する
        1. 噛む
        1. 食べる
        1. 甘える
1. 注文
    1. プロパティ
        1. 商品名
        1. 商品番号
        1. 店舗名
        1. 伝票
    1. メソッド
        1. 宅配
        1. 案内
        1. 会計
1. 商品
    1. プロパティ
        1. 商品名
        1. 商品コード
        1. 定価
        1. 在庫
        1. 履歴
    1. メソッド
        1. 品入れ
        1. 品だし
        1. 売上計算
        1. 割引情報
        1. 売り上げ推移グラフ
1. レシピ
    1. プロパティ
        1. 料理名
        1. 分類（中華・和食）
        1. 材料
        1. 使う調理器具
        1. 予算
        1. 栄養素
        1. 作り方
        1. 出来上がりの写真
    1. メソッド
        1. 料理の存在を教える
        1. 作り方を教える
        1. 材料を教える
        1. カロリーを教える
        1. 出来上がりをイメージする

**先生の意見**
- 車
	- アクセルよりも移動とかのほうがいいかな
- 犬
	- 親の名前をプロパティにするなら、両親でわけたほうがいいかな
		- ペットショップのDBシステムと考えると、どっちの情報も欲しいし
- 注文
	- 商品単品じゃなくて、商品一覧にするかな
	- 商品の削除とかいれるかな
- 商品
	- 1.2.3.5のメソッドは、商品に命令しても動かないので、ちょっと違うかも。
	例えば、品入れ品出しは、倉庫レベルで考えたほうがしっくりくると思う。
	倉庫クラスを別で作って、その倉庫の商品一覧のところにあるかな？って倉庫に対して命令したほうがしっくりくる。
	- 商品単体としてはできない、割引情報はプロパティでもいいかもしれない。
	- 例えば、商品っていう、マウスよりもうえのレイヤならメソッドはほとんどない
- 料理
	- 料理の存在を教えるってのは面白いと思った

</details>

# 作り方
## プロジェクト
プロジェクトを作るところから。想定としては、セラバンクってところからシステムを作ってくれと依頼された。  
以下手順。
1. `パッケージエクスプローラー > 新規 > javaproject`
1. プロジェクト名に`SeraBank`
1. 一番下のモジュールってところのチェックだけ外す

## パッケージについて
プログラミングをしていくにつれて、システムのメインを動かすためのものだったり、特定の処理をするためのものを、フォルダ分けして管理したりする。  
DBをなんやかんやするものがメインにいっぱいあるよりも、別のDBフォルダにわけたほうが、
ネットワークならネットワークフォルダに、ユーザとのやり取りであるUIを作るならUIフォルダに……  
そうやってわけたほうがわかりやすい。そのわけたフォルダのことをパッケージと呼んでいる。  
例えば`String`なら、`jaba.utils.String`で、`utils`がパッケージ。  


プロジェクトを作るときに、パッケージ名がかぶっちゃうと使えなくなったりで大変。  
例えば、`java.practice`ってパッケージを作って、その中で`Practice.java`ってのを作ると、`java.practice`のことを探すはずなのに、javaが自分のことを探し出す。  
javaがjavaのパッケージを探し出して、見つからなくてコンパイルエラーとなってしまう。  

こういうときは、パッケージ名にURL、`seraku.co.jp`を使う。URLは一意なので。  
ただし、逆から使う。つまり、`jp > co > seraku`となる。  
そこからさらに、DBとなって、さらにそこに〇〇.java、という風になる。


けれど、serakuの人がみんな`jp.co.seraku`を使うと大変なことになる。  
例えば、`jp.co.seraku`で`App`というのを作ったとする。  
その後、大阪支社で同じ名前の`App`というのを作られました。  
その大阪の`App`を使いたいので、projectを貰って追加して、名古屋で実行しようとすると……  
どっちの`App`を見ればいいのかわからなくなり、困る。  

なので、基本的には`jp.co.seraku`の後に今回のプロジェクト名を付けたりする。  
こうやってパッケージ名を決める。また、あくまでもURLなので、全て小文字で書く。


# クラス
## クラスの使い方
先程作ったパッケージを右クリックして新規クラス作成、名前は`SeraBankApp`。  
で、一旦メインは放置する。ここにAccountクラスを作ると、読みにくくなってしまうし、動くことは動くけど、色々と問題がある。  
なので、独自のファイルに書き込んで、それぞれのファイルに分けて作成する。  

さっきと同じように`Account`を作成する。  
コツとして、まず必要なものを大量に書き込んで、あとで色々とちゃんとしていく。
```java 
package jp.co.seraku.serabank;

public class Account {
	code
	amount
	ownerName	
}
```
こんな感じ。  


クラスのプロパティは変数と同じと思ってもらえればいい、今の3つは変数だと思ってほしい。  
これ、`code`は何型にすればいいと思う？整数しか使わないので`int`。残高は日本円なので整数。  
> 余談：小数点を使うと、計算結果がズレることがある。
そのため、お金に小数点がある国では、金額系はあえて全部intにして、表示するときにint/100とすれば、計算のエラーが起きにくくなる。

```java 
package jp.co.seraku.serabank;

public class Account {
	int code;
	int amount;
	String ownerName;
	
}
```
これでAccountクラスが完成した。

# インスタンス
Accountを使う方法について。  
メインのクラスで使いたいので、Accountオブジェクトを作る。`new`ってのをつけて作ってあげる。
```java 
new Account();
```
この新しくオブジェクトを作る動作を、インスタンス(instance)・インスタンス化という。  
「Accountクラスをインスタンスして」といわれたら上記の`new`をすればいい。  
でも、これだけだとオブジェクトを作っただけ。ここででてくるのが、変数。　　
Account型の変数を作れば、いつでも色々とできるようになる。


# カプセル化
少し前に引き出しメソッドを作成したが、実はまだ、`myAccount.amount -〇〇`とすれば、自由に引き出せてしまう。  
これではマズいので、他のクラスが自由にプロパティを変更できないようにする。
```java 
public class Account {
	private int code;
	private int amount;
	private String ownerName;	
}
```
`private`をつけると、そのプロパティを持っているクラスしか、その変数を触れなくなる。  
その代わり、他のクラスに値を渡すためのメソッド（通称`getter`）と、貰った値をプロパティに設定するためのメソッド（通称`setter`）を用意する。
```java 
// getter
public int getCode() {
	return code;
}

// setter
public void setCode(int code) {
	this.code = code;
}
```
> 注：getterとsetterは、手当たり次第に作成すればよいというわけではない。  


このように、他のクラスがプロパティに自由に触れなくすることを、カプセル化という。

また、先程の`private`のように、誰が見れるのかを設定するための修飾子を、アクセス修飾子と呼ぶ。`public`もアクセス修飾子である。  
アクセス修飾子は、変数やメソッドにつけることができる。


# コンストラクタ
銀行口座の、口座名義や番号は、どのタイミングで設定される？変更される？  
変更しようとするときは、削除して作り直す。つまり、値は変更されない。  
そこに着目すると、コードでも同じことをすることになる。

作る段階で指定して、変更できないようにする。  
javaはどこまで考えてくれていて、`construct`という、最初に動作させてくれるメソッドがある。  
それは、
```java 
Account myAccount = new Account();
```
で使ってる。でもコンストラクタメソッドなんて作ってないよね？その通り。  
`class Object`というのが存在する、その`Object`を親に持っていれば、子供のクラスも親のメソッドを実行できる。  
> 親にできるたいていのことは、受け継いでるから子供でもできる  
クラスも同じで、javaがうらっかわで
```java 
public Account(){

}
```
というメソッドを作ってくれている。


で、コンストラクタといえどメソッドなので、我々が自由に書き込んで実装できます。  
じゃあAccountのときだけ、我々が作ったコンストラクタメソッドで、「必ず口座名義と番号を決めないと作れない」ってしてしまえばいい。
```java 
// コンストラクタに引数を設定しないとインスタンス化できない！
public Account(int code, String ownerName){

}
```
そのうえで、設定したプロパティはよそから見えなくしたいので、`private`にしました。すると、
```java 
public Account(int code, String ownerName){
    code = code;
    ownerName = ownerName;
}
```
だと設定できない。エクリプスの文字色を見るとわかる通り、プロパティは青だけど、今のコードは違う色になっている。つまり、プロパティを指定できていない。  
このクラスのプロパティを指定したい、そんな時は、
```java 
public Account(int code, String ownerName){
    this.code = code;
    this.ownerName = ownerName;
}
```
とする。`this`で、このクラスの、ってすることができる。


メインクラスで、
```java 
Account myAccount = new Account(123,"Geshner");
```
とすれば、Accountインスタンスが作成できる。でも今の状態だとプロパティが`private`なので、
```java 
myAccount.ownerName
```
としても読めない。なので、
```java 
myAccount.getOwnerName();
```
とかして呼び出してみてほしい。


ほか、例えばアカウントを作るときに、お金を入れられると便利なので、お金を入れることも入れないこともできるようにしたい場合。
そういう時は、
```java 
Account myAccount = new Account(1234,"yasukawa");
```
から、コンストラクタを追加して、
```java 
Account myAccount = new Account(1234,"yasukawa",500);
```
としてしまえばいい。  
実はメソッドは、引数さえ違えば、同じ名前のメソッドを複数作成できる。もちろん、コンストラクタもメソッドなので複数作成できる。  
しかも、コンストラクタからコンストラクタを呼ぶことも可能。なので、最終的にはこのようにすればよい。
```java 
package jp.co.serabank;

public class Account {
	private int code;
	private String ownerName;
	private int amount;

	public Account(int code, String ownerName, int initialValue) {
		this.code = code;
		this.ownerName = ownerName;
		this.amount = initialValue;
	}

	public Account(int code, String ownerName) {
		this(code, ownerName, 0);	// アカウント作成時にお金を入れない場合は0を入れる
	}
}
```
コンストラクタを呼ぶときは、`this(引数)`と書く。








# 課題2
さっき作ったクラスを実装して、チャットに送ってほしい。  
カプセル化とかはしてほしい。








</div>

<div class=side>
<div class=sticky>
<details><summary>目次</summary>

- [3日目 カンペ](#3日目-カンペ)
	- [ゴール](#ゴール)
	- [授業プラン](#授業プラン)
- [オブジェクト指向](#オブジェクト指向)
- [オブジェクトについて](#オブジェクトについて)
	- [プロパティ](#プロパティ)
	- [メソッド](#メソッド)
		- [戻り値について](#戻り値について)
		- [引数について](#引数について)
- [課題1](#課題1)
	- [実際に作ってもらったもの](#実際に作ってもらったもの)
- [作り方](#作り方)
	- [プロジェクト](#プロジェクト)
	- [パッケージについて](#パッケージについて)
- [クラス](#クラス)
	- [クラスの使い方](#クラスの使い方)
- [インスタンス](#インスタンス)
- [カプセル化](#カプセル化)
- [コンストラクタ](#コンストラクタ)
- [課題2](#課題2)


</details>

</div>
</div>
</div>
